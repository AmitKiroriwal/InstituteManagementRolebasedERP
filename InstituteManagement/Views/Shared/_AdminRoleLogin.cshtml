@using InstituteManagement_Models;
@using Microsoft.AspNetCore.Identity;


@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    var user = UserManager.GetUserAsync(User).Result;
    
    var userRole = UserManager.GetRolesAsync(user).Result.FirstOrDefault();
}

<ul class="nav">
    <li class="nav-item nav-profile border-bottom">
        <a href="#" class="nav-link flex-column">
            <div class="nav-profile-image">
                <img src="~/Layout_Assets/images/faces/face1.jpg" alt="profile" />
                <!--change to offline or busy as needed-->
            </div>

            <div class="nav-profile-text d-flex ml-0 mb-3 flex-column">
                <span class="font-weight-semibold mb-1 mt-2 text-center">@UserManager.GetUserName(User)</span>
                <span class="text-secondary icon-sm text-center">@userRole</span>
            </div>
        </a>
    </li>

    <li class="nav-item pt-3">
        <a class="nav-link d-block" href="index.html">
            <img class="sidebar-brand-logo" src="~/Layout_Assets/images/logo.svg" alt="" />
            <img class="sidebar-brand-logomini" src="~/Layout_Assets/images/logo-mini.svg" alt="" />
            <div class="small font-weight-light pt-1">Responsive Dashboard</div>
        </a>
        <form class="d-flex align-items-center" action="#">
            <div class="input-group">
                <div class="input-group-prepend">
                    <i class="input-group-text border-0 mdi mdi-magnify"></i>
                </div>
                <input type="text" class="form-control border-0" placeholder="Search" />
            </div>
        </form>
    </li>
    <li class="pt-2 pb-1">
        <span class="nav-item-head">Admin Pages</span>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="index.html">
            <i class="mdi mdi-compass-outline menu-icon"></i>
            <span class="menu-title">Dashboard</span>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="#ui-basic" aria-expanded="false" aria-controls="ui-basic">
            <i class="mdi mdi-crosshairs-gps menu-icon"></i>
            <span class="menu-title">Masters</span>
            <i class="menu-arrow"></i>
        </a>
        <div class="collapse" id="ui-basic">
            <ul class="nav flex-column sub-menu">
                <li class="nav-item">
                    <a class="nav-link" asp-action="CreateRole" asp-controller="Admin">Add New Role</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" asp-action="ListRole" asp-controller="Admin">All Roles</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" asp-action="ListUsers" asp-controller="Admin">All Users</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" asp-action="GetPendingAccountConfirmation" asp-controller="Admin">Pending Approvals</a>
                </li>
            </ul>
        </div>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="pages/icons/mdi.html">
            <i class="mdi mdi-contacts menu-icon"></i>
            <span class="menu-title">Accounts</span>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" data-toggle="collapse" href="#ui-Subscription" aria-expanded="false" aria-controls="ui-Subscription">
            <i class="mdi mdi-format-list-bulleted menu-icon"></i>
            <span class="menu-title">Subscriptions</span>
            <i class="menu-arrow"></i>
        </a>

        
        <div class="collapse" id="ui-Subscription">
            <ul class="nav flex-column sub-menu">
                <li class="nav-item">
                    <a class="nav-link" asp-action="Index" asp-controller="Subscriptions">View Plans</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" asp-action="CreatePlan" asp-controller="Subscriptions">Create Plan</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" asp-action="GetSubscriptions" asp-controller="Subscriptions">Active Subscriptions</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" asp-action="PendingSubscriptions" asp-controller="Subscriptions">Pending Subscriptions</a>
                </li>
                
            </ul>
        </div>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="pages/charts/chartjs.html">
            <i class="mdi mdi-chart-bar menu-icon"></i>
            <span class="menu-title">Charts</span>
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="pages/tables/basic-table.html">
            <i class="mdi mdi-table-large menu-icon"></i>
            <span class="menu-title">Tables</span>
        </a>
    </li>
    <li class="nav-item pt-3">
        <a class="nav-link" href="http://bootstrapdash.com/demo/plus-free/documentation/documentation.html" target="_blank">
            <i class="mdi mdi-file-document-box menu-icon"></i>
            <span class="menu-title">Documentation</span>
        </a>
    </li>
</ul>


